@using journalApp.Services
@inject IThemeService ThemeService
@inject IJSRuntime JS

<button class="btn btn-sm theme-toggle-btn" @onclick="ToggleTheme">
    @if (CurrentTheme == "light")
    {
        <i class="bi bi-moon-fill"></i>
    }
    else
    {
        <i class="bi bi-sun-fill"></i>
    }
</button>

<style>
    .theme-toggle-btn {
        border: 1px solid #ddd;
        background-color: white;
        color: #333;
        padding: 0.5rem 0.75rem;
        border-radius: 0.25rem;
        transition: all 0.3s ease;
    }

    .theme-toggle-btn:hover {
        background-color: #f8f9fa;
        border-color: #adb5bd;
    }

    body.theme-dark .theme-toggle-btn {
        background-color: #2d2d2d;
        color: #ffffff;
        border-color: #444;
    }

    body.theme-dark .theme-toggle-btn:hover {
        background-color: #3d3d3d;
        border-color: #555;
    }

    .theme-toggle-btn i {
        font-size: 1rem;
    }
</style>

@code {
    private string CurrentTheme = "light";

    protected override async Task OnInitializedAsync()
    {
        CurrentTheme = await ThemeService.GetTheme();
        await JS.InvokeVoidAsync("setTheme", CurrentTheme);
    }

    private async Task ToggleTheme()
    {
        await ThemeService.ToggleTheme();
        CurrentTheme = await ThemeService.GetTheme();
        await JS.InvokeVoidAsync("setTheme", CurrentTheme);
    }
}